<link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" rel="stylesheet" integrity="sha256-7s5uDGW3AHqw6xtJmNNtr+OBRJUlgkNJEo78P4b0yRw= sha512-nNo+yCHEyn0smMxSswnf/OnX6/KwJuZTlNZBjauKhTK0c+zT+q5JOCx0UFhXQ6rJR9jg6Es8gPuD2uZcYDLqSw==" crossorigin="anonymous">

<style>
  .form-large input {
    font-size: 18px;
    padding: 8px;
    height: auto;
    line-height: normal;
  }

  .form-wide {
    width: 480px;
  }
</style>

<body>
  <div style="margin-top: 100px"></div>

  <div class="container">
    <h1>Shopify Tax Receipts</h1>
    <h2><small>This app requires you to login to start using it.</small></h2>
  </div>

  <div style="margin-top: 30px"></div>

  <div class="container">
    <form id="login" role="form" class="form-large" action="/auth/shopify" method="post">
      <input type="hidden" name="authenticity_token" value="<%= env['rack.session'][:csrf] %>" />
      <div class="input-group form-wide">
        <input class="form-control" name="shop" value="<%= params['shop'] %>" placeholder="your-shop-url.myshopify.com">
        <span class="input-group-btn">
          <input class="btn" type="submit" value="Login" />
        </span>
      </div>
    </form>
  </div>

  <% if params['shop'].present? %>
    <div style="position: fixed; top: 0; left: 0; height: 100%; width: 100%; z-index: 1000; background: white;">
      <div style="padding-left: 10px; padding-top: 10px">
        Logging in...
      </div>
    </div>

    <script>
      document.getElementById("login").submit();
    </script>
  <% end %>
</body>
